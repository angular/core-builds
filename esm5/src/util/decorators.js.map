{"version":3,"file":"decorators.js","sourceRoot":"","sources":["../../../../../../packages/core/src/util/decorators.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {Type} from '../type';\n\n/**\n * An interface implemented by all Angular type decorators, which allows them to be used as ES7\n * decorators as well as\n * Angular DSL syntax.\n *\n * ES7 syntax:\n *\n * ```\n * @ng.Component({...})\n * class MyClass {...}\n * ```\n *\n */\nexport interface TypeDecorator {\n  /**\n   * Invoke as ES7 decorator.\n   */\n  <T extends Type<any>>(type: T): T;\n\n  // Make TypeDecorator assignable to built-in ParameterDecorator type.\n  // ParameterDecorator is declared in lib.d.ts as a `declare type`\n  // so we cannot declare this interface as a subtype.\n  // see https://github.com/angular/angular/issues/3379#issuecomment-126169417\n  (target: Object, propertyKey?: string|symbol, parameterIndex?: number): void;\n}\n\nexport const ANNOTATIONS = '__annotations__';\nexport const PARAMETERS = '__parameters__';\nexport const PROP_METADATA = '__prop__metadata__';\n\n/**\n * @suppress {globalThis}\n */\nexport function makeDecorator(\n    name: string, props?: (...args: any[]) => any, parentClass?: any,\n    chainFn?: (fn: Function) => void, typeFn?: (type: Type<any>, ...args: any[]) => void):\n    {new (...args: any[]): any; (...args: any[]): any; (...args: any[]): (cls: any) => any;} {\n  const metaCtor = makeMetadataCtor(props);\n\n  function DecoratorFactory(...args: any[]): (cls: any) => any {\n    if (this instanceof DecoratorFactory) {\n      metaCtor.call(this, ...args);\n      return this;\n    }\n\n    const annotationInstance = new (<any>DecoratorFactory)(...args);\n    const TypeDecorator: TypeDecorator = <TypeDecorator>function TypeDecorator(cls: Type<any>) {\n      typeFn && typeFn(cls, ...args);\n      // Use of Object.defineProperty is important since it creates non-enumerable property which\n      // prevents the property is copied during subclassing.\n      const annotations = cls.hasOwnProperty(ANNOTATIONS) ?\n          (cls as any)[ANNOTATIONS] :\n          Object.defineProperty(cls, ANNOTATIONS, {value: []})[ANNOTATIONS];\n      annotations.push(annotationInstance);\n      return cls;\n    };\n    if (chainFn) chainFn(TypeDecorator);\n    return TypeDecorator;\n  }\n\n  if (parentClass) {\n    DecoratorFactory.prototype = Object.create(parentClass.prototype);\n  }\n\n  DecoratorFactory.prototype.ngMetadataName = name;\n  (<any>DecoratorFactory).annotationCls = DecoratorFactory;\n  return DecoratorFactory as any;\n}\n\nfunction makeMetadataCtor(props?: (...args: any[]) => any): any {\n  return function ctor(...args: any[]) {\n    if (props) {\n      const values = props(...args);\n      for (const propName in values) {\n        this[propName] = values[propName];\n      }\n    }\n  };\n}\n\nexport function makeParamDecorator(\n    name: string, props?: (...args: any[]) => any, parentClass?: any): any {\n  const metaCtor = makeMetadataCtor(props);\n  function ParamDecoratorFactory(...args: any[]): any {\n    if (this instanceof ParamDecoratorFactory) {\n      metaCtor.apply(this, args);\n      return this;\n    }\n    const annotationInstance = new (<any>ParamDecoratorFactory)(...args);\n\n    (<any>ParamDecorator).annotation = annotationInstance;\n    return ParamDecorator;\n\n    function ParamDecorator(cls: any, unusedKey: any, index: number): any {\n      // Use of Object.defineProperty is important since it creates non-enumerable property which\n      // prevents the property is copied during subclassing.\n      const parameters = cls.hasOwnProperty(PARAMETERS) ?\n          (cls as any)[PARAMETERS] :\n          Object.defineProperty(cls, PARAMETERS, {value: []})[PARAMETERS];\n\n      // there might be gaps if some in between parameters do not have annotations.\n      // we pad with nulls.\n      while (parameters.length <= index) {\n        parameters.push(null);\n      }\n\n      (parameters[index] = parameters[index] || []).push(annotationInstance);\n      return cls;\n    }\n  }\n  if (parentClass) {\n    ParamDecoratorFactory.prototype = Object.create(parentClass.prototype);\n  }\n  ParamDecoratorFactory.prototype.ngMetadataName = name;\n  (<any>ParamDecoratorFactory).annotationCls = ParamDecoratorFactory;\n  return ParamDecoratorFactory;\n}\n\nexport function makePropDecorator(\n    name: string, props?: (...args: any[]) => any, parentClass?: any): any {\n  const metaCtor = makeMetadataCtor(props);\n\n  function PropDecoratorFactory(...args: any[]): any {\n    if (this instanceof PropDecoratorFactory) {\n      metaCtor.apply(this, args);\n      return this;\n    }\n\n    const decoratorInstance = new (<any>PropDecoratorFactory)(...args);\n\n    return function PropDecorator(target: any, name: string) {\n      const constructor = target.constructor;\n      // Use of Object.defineProperty is important since it creates non-enumerable property which\n      // prevents the property is copied during subclassing.\n      const meta = constructor.hasOwnProperty(PROP_METADATA) ?\n          (constructor as any)[PROP_METADATA] :\n          Object.defineProperty(constructor, PROP_METADATA, {value: {}})[PROP_METADATA];\n      meta[name] = meta.hasOwnProperty(name) && meta[name] || [];\n      meta[name].unshift(decoratorInstance);\n    };\n  }\n\n  if (parentClass) {\n    PropDecoratorFactory.prototype = Object.create(parentClass.prototype);\n  }\n\n  PropDecoratorFactory.prototype.ngMetadataName = name;\n  (<any>PropDecoratorFactory).annotationCls = PropDecoratorFactory;\n  return PropDecoratorFactory;\n}\n"]}